# API 兼容性检查清单

## 范围
- 网关外部 API、内部服务契约、消息 Schema（Kafka/NATS）、DB schema

## 检查步骤
- 语义版本化：破坏性变更需提升主版本或走双轨
- Schema 兼容：新增字段需可选；删除字段需双轨/迁移期
- Feature Flag：非兼容路径默认关闭，仅在灰度/实验打开
- 回放验证：使用录制流量 Shadow，对比旧版/新版响应差异
- 合规/安全：鉴权范围是否变化，数据脱敏/最小权限

## 输出模板
- 变更描述：
- 兼容性评估：兼容/部分兼容/不兼容
- 缓解策略：双写/影子表/特性开关/迁移教程
- 测试与验证：回放/集成/契约测试结果
- 风险与回滚：触发条件、切换路径、所需时间

