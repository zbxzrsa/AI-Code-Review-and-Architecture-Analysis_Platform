# ============================================================
# AI Code Review Platform - Production Environment Configuration
# 生产环境配置模板
# ============================================================
# 
# IMPORTANT: Copy this file to .env.production and configure all values.
# DO NOT commit .env.production to version control!
#
# 重要提示: 复制此文件为 .env.production 并配置所有值。
# 不要将 .env.production 提交到版本控制！
# ============================================================

# ============================================================
# Environment / 环境
# ============================================================
ENVIRONMENT=production
DEBUG=false
MOCK_MODE=false

# ============================================================
# CORS Configuration [REQUIRED] / 跨域配置 [必需]
# ============================================================
# Comma-separated list of allowed origins
# Example: https://your-domain.com,https://app.your-domain.com
CORS_ORIGINS=https://your-domain.com

# ============================================================
# JWT Security [REQUIRED] / JWT安全 [必需]
# ============================================================
# Generate with: openssl rand -base64 64
# Must be at least 32 characters (256 bits)
JWT_SECRET_KEY=GENERATE_A_SECURE_RANDOM_KEY_HERE
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================
# Database Configuration [REQUIRED] / 数据库配置 [必需]
# ============================================================
# Use strong passwords! Do not use default values.
POSTGRES_HOST=your-db-host
POSTGRES_PORT=5432
POSTGRES_USER=coderev_prod
POSTGRES_PASSWORD=GENERATE_STRONG_PASSWORD_HERE
POSTGRES_DB=code_review_platform
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Connection Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800

# ============================================================
# Redis Configuration [REQUIRED] / Redis配置 [必需]
# ============================================================
REDIS_HOST=your-redis-host
REDIS_PORT=6379
REDIS_PASSWORD=GENERATE_STRONG_PASSWORD_HERE
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/0

# ============================================================
# Neo4j Configuration [REQUIRED] / Neo4j配置 [必需]
# ============================================================
NEO4J_HOST=your-neo4j-host
NEO4J_PORT=7687
NEO4J_PASSWORD=GENERATE_STRONG_PASSWORD_HERE

# ============================================================
# MinIO/S3 Configuration [REQUIRED] / 对象存储配置 [必需]
# ============================================================
MINIO_ENDPOINT=your-minio-host:9000
MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=GENERATE_STRONG_PASSWORD_HERE
MINIO_BUCKET=code-review-artifacts

# ============================================================
# AI Provider Configuration / AI提供商配置
# ============================================================
# At least one provider must be configured
OPENAI_API_KEY=sk-your-production-key
ANTHROPIC_API_KEY=sk-ant-your-production-key

# ============================================================
# Rate Limiting / 速率限制
# ============================================================
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000

# ============================================================
# Request Limits / 请求限制
# ============================================================
MAX_REQUEST_SIZE_MB=10

# ============================================================
# Logging / 日志
# ============================================================
LOG_LEVEL=WARNING

# ============================================================
# Feature Flags / 功能开关
# ============================================================
FEATURE_2FA_ENABLED=true
FEATURE_API_KEYS_ENABLED=true
FEATURE_AUDIT_LOGGING=true

# ============================================================
# Monitoring / 监控
# ============================================================
PROMETHEUS_URL=http://prometheus:9090
GRAFANA_URL=http://grafana:3000
GRAFANA_PASSWORD=CHANGE_THIS_PASSWORD

# ============================================================
# OAuth Configuration (Optional) / OAuth配置 (可选)
# ============================================================
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_CALLBACK_URL=https://your-domain.com/oauth/callback/github

GITLAB_CLIENT_ID=your-gitlab-client-id
GITLAB_CLIENT_SECRET=your-gitlab-client-secret
GITLAB_CALLBACK_URL=https://your-domain.com/oauth/callback/gitlab
